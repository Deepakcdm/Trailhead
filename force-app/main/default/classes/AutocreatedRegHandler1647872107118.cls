//TODO:This autogenerated class includes the basics for a Registration
//Handler class. You will need to customize it to ensure it meets your needs and
//the data provided by the third party.

global class AutocreatedRegHandler1647872107118 implements Auth.RegistrationHandler{

global boolean canCreateUser(Auth.UserData data) {
    //TODO: Check whether we want to allow creation of a user with this data
    //Set<String> s = new Set<String>{'usernamea', 'usernameb', 'usernamec'};
    //if(s.contains(data.username)) {
        //return true;
    //}
    return false;
}

global User createUser(Id portalId, Auth.UserData data){
system.debug(data);

        User u = [Select Id,UserName,Email from User where FederationIdentifier =:data.identifier LIMIT 1];
        system.debug(u);
        return u;
}

global void updateUser(Id userId, Id portalId, Auth.UserData data){
system.debug(data);

    User u = new User(id=userId);
    u.email = data.email;
    u.lastName = data.lastName;
    u.firstName = data.firstName;

    update(u);
    system.debug(u);
  }
}